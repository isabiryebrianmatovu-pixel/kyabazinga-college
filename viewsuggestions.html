<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>View Suggestions – Kyabazinga College</title>

<style>
body{
    margin:0;
    padding:0;
    font-family:"Times New Roman", serif;
    background:#f4f4f4;
}
header{
    background:#d40000;
    color:white;
    text-align:center;
    padding:25px 10px;
}
nav{
    background:#a00000;
    padding:10px;
    text-align:center;
}
nav a{
    color:white;
    text-decoration:none;
    margin:0 10px;
    font-weight:bold;
}
nav a:hover{
    text-decoration:underline;
}
.container{
    width:95%;
    max-width:900px;
    margin:30px auto;
    background:white;
    padding:25px;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.2);
}
h2{
    color:#d40000;
    text-align:center;
    margin-bottom:15px;
}
table{
    width:100%;
    border-collapse:collapse;
}
th, td{
    border:1px solid #ccc;
    padding:10px;
    text-align:left;
    vertical-align:top;
}
th{
    background:#f2f2f2;
    color:#d40000;
}
button{
    padding:6px 10px;
    background:#d40000;
    color:white;
    border:none;
    border-radius:4px;
    cursor:pointer;
}
button:hover{
    background:#a00000;
}
.empty{
    text-align:center;
    font-weight:bold;
    color:#555;
}
.clear-btn{
    margin-bottom:10px;
    background:#002366;
}
footer{
    background:#002366;
    color:white;
    text-align:center;
    padding:15px;
    margin-top:40px;
}
</style>
</head>

<body>

<header>
<h1>KYABAZINGA COLLEGE</h1>
<p><em>Suggestions – Administrator View</em></p>
</header>

<nav>
<a href="administrator.html">BACK TO ADMIN</a>
</nav>

<div class="container">
<h2>Submitted Suggestions</h2>

<button class="clear-btn" onclick="clearAll()">Clear All Suggestions</button>

<table id="suggestionsTable">
<thead>
<tr>
<th>#</th>
<th>Name</th>
<th>Suggestion</th>
<th>Date</th>
<th>Action</th>
</tr>
</thead>
<tbody></tbody>
</table>

<p class="empty" id="emptyMsg" style="display:none;">No suggestions available.</p>
</div>

<footer>
<p>© <span id="year"></span> Kyabazinga College — We Are Just Educated and Cultured</p>
</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();

let suggestions = JSON.parse(localStorage.getItem("suggestions") || "[]");

const tbody = document.querySelector("#suggestionsTable tbody");
const emptyMsg = document.getElementById("emptyMsg");

function renderSuggestions(){
    tbody.innerHTML = "";

    if(suggestions.length === 0){
        emptyMsg.style.display = "block";
        return;
    } else {
        emptyMsg.style.display = "none";
    }

    suggestions.forEach((s, index)=>{
        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td>${index + 1}</td>
            <td>${s.name}</td>
            <td>${s.message}</td>
            <td>${s.date}</td>
            <td>
                <button onclick="deleteSuggestion(${index})">Delete</button>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

function deleteSuggestion(index){
    if(confirm("Delete this suggestion?")){
        suggestions.splice(index,1);
        localStorage.setItem("suggestions", JSON.stringify(suggestions));
        renderSuggestions();
    }
}

function clearAll(){
    if(confirm("Are you sure you want to delete ALL suggestions?")){
        localStorage.removeItem("suggestions");
        suggestions = [];
        renderSuggestions();
    }
}

renderSuggestions();
</script>

</body>
</html>